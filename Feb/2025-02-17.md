# 🧾TIL
## 날짜: 2025-02-17 🎀

## 새로 배운 내용

### 웹 파트 전체 키워드 정리 

|  | 정의 | 비고 |
| --- | --- | --- |
| 클라이언트 - 서버 | 리소스를 요청하고 응답하는 관계 |  |
| DNS | 도메인 명을 IP주소로 변환하는 서버 |  |
| OSI 7 계층 | 네트워크 통신을 7개의 계층으로 나누어 표준화한 모델 | - 물리, 데이터 링크, 네트워크, 전송, 세션, 표현, 응용 |
| TCP | OSI 7 Layer 전송 계층으로, 신뢰성을 보장하는 프로토콜 | - 도착했는지, 안 했는지 확인함 |
| UDP | OSI 7 Layer 전송 계층으로, 신뢰성을 보장하지 않지만 빠른 속도를 보이는 프로토콜 |  |
| CDN | 전 세계의 분산된 서버를 활용해 콘텐츠를 빠르고 안정적으로 제공하는 네트워크 시스템  |  |
| SSL | 데이터 암호화를 통해 인터넷 통신을 보호하는 보안 프로토콜 |  |
| TLS | SSL보다 더 강력한 보안 기능을 제공하는 프로토콜 |  |
| 대칭키 암호화 | 복호화/암호화를 모두 같은 키로 하는 암호화 방식 | 송신자와 수신자 모두 같은 키(대칭키 = 세션키)로 암호화/ 복호화한다. |
| 비대칭키 암호화 | 복호화/암호화를 다른 키로 하는 암호화 방식 | 송신자가 공개 키로 암호화하고, 수신자는 비밀 키로 복호화한다. |
| HTTP cache | 브라우저나 중간 서버에 리소스를 저장하여 재사용하는 것  |  |
| API | 응용 프로그램 인터페이스로, 프로그램 간 통신을 위해 정의한 규칙 | API가 명세서, 설명서라면 라이브러리는 개발자에게 기능을 제공할 수 있도록 실제로 구현된 구현체이다. |
| API Gateway | 클라이언트와 여러 백엔드 서버 간의 API 요청을 관리하고, 라우팅, 인증, 로드 밸런싱, 캐싱 등의 기능을 제공하는 중간 계층 |  |
| REST | 자원 중심 소프트웨어 아키텍처 스타일 |  |
| REST API | REST 철학을 기반으로 잘 설계된 API | uri와 http method를 보고 어떤 요청인지 누구나 알아볼 수 있어야 함. |
| HTTP 자격증명 헤더 | 클라이언트와 서버의 인증 과정에서 사용자의 자격 을 확인하기 위해 사용하는 헤더  |  |
| Bearer Token | HTTP 자격 증명 헤더의 Authorization에 토큰을 넣어 인증하는 방식 |  |
| Json Web Token | json 형태로 사용자 인증 정보를 포함하는 토큰 |  |
| Access Token | 토큰 인증 방식에서 로그인에 성공할 시 클라이언트에 전송하는 토큰  | 클라이언트는 이 액세스 토큰을 저장하고, 매 요청마다 실어서 보낸다.  (body or header의 Authorization) |
| Refresh Token | 토큰 인증 방식에서 액세스 토큰이 만료 되었을 시 재발급을 위해 사용하는 토큰 | 리프레쉬 토큰은 액세스 토큰에 비해 유효기간이 길고, HttpOnly 옵션의 쿠키에 저장하는 것이 좋다. |
| OAuth | 비밀번호 설정 없이 다른 서비스 계정으로 인증할 수 있게 하는 개방형 프로토콜 |  |
| 쿠키 | 브라우저에 의해 관리되는 작은 정보 파일 |  |
| 퍼스트파티 쿠키 | 사용자가 방문한 웹 사이트에서 설정한 쿠키 |  |
| 서드파티 쿠키 | 사용자가 방문한 웹 사이트에서 요청한 다른 서드 파티 서비스에서 설정한 쿠키 |  |
| 세션 | 일정 기간 동안의 클라이언트와 서버 간 연결 정보 |  |
| 로컬 스토리지 | 클라이언트에 영구적으로 저장되는 웹 스토리지 |  |
| 세션 스토리지 | 브라우저의 탭 별로 유지되는 스토리지 | 같은 탭이어도 같은 도메인, 포트의 경우에만 공유됨. 탭을 종료하면 사라짐 |

### 쿠키, 세션 : 웹 어플리케이션에서 사용자 상태를 유지하는 방법
https://hyemmimi.tistory.com/15

### 웹 스토리지 (로컬, 세션 스토리지)
https://hyemmimi.tistory.com/16


### 오늘의 회고
오늘은 HTTP가 무상태성 프로토콜이기 때문에 이전의 클라이언트 요청을 저장하지 않으며, 이를 보완하기 위한 쿠키와 세션에 대해서 알아보고, 차이점을 비교해보았다.

또, 쿠키와 세션은 완전히 별개의 개념이 아니라 세션 방식에서는 세션ID를 쿠키에 저장하며 이를 기반으로 데이터를 찾아 사용한다.

세션 정보를 담는 저장소로는 서버(WAS)의 메모리, 데이터베이스, Redis가 일반적이라는 것 또한 배웠다.

애매하게 알고 있었던 개념들을 딥하게 파보며 많은 궁금증들이 풀리게 된 것 같아 다행이라고 생각한다.

특히 쿠키는 악성 코드를 주입하는 XSS 공격과 클라이언트가 쿠키를 전송할 수 있다는 점을 이용한 CSRF 공격에 대해 예시를 통해 이해하면서, 쿠키의 단점과 이를 해결하기 위한 방법들에 대해서도 공부했다.

결론은 쿠키를 사용하고자 한다면 HttpOnly, Secure, SameSite 옵션을 필수적으로 사용해야 한다는 것이다.

XSS 공격을 방지하기 위해 자바스크립트로 접근할 수 없게 하는 HttpOnly 옵션을 사용한다는 건 이해가 잘 되었는데,

처음엔 CSRF 공격을 방지하기 위해 SameSite 옵션의 속성들을 어떻게 사용할 수 있을지 감이 오지 않았었다.

쉽게 생각하면, SameSite는 쿠키를 다른 도메인 서버에 전송할 수 있느냐? 였다.

속성 **Strict**는 사용자가 방문한 웹 사이트에서만 쿠키를 전송할 수 있고,

**Lax**는 사용자가 방문한 웹 사이트와 타 사이트와의 일부 상황(get 요청 등...)에서 쿠키를 전송할 수 있게 하는 것이며,

**None**은 어디에서나 쿠키를 전송할 수 있는 것이다.

쿠키의 SameSite 속성을 None으로 할 때의 문제점은, 만약 공격자에 의해 유도된 피싱사이트로 요청을 보내게 될 경우 해당 쿠키가 자동으로 전송될 수 있다는 것이다. 이를 CSRF 공격이라고 한다.

이를 이해하기에 많은 시간이 걸렸지만, 그래도 이해를 하게 된 것 같아 뿌듯하다 ,, 😋

잘 기억해두었다가 프로젝트 시작하면 요긴하게 핥아먹어야지 ... (?)_

