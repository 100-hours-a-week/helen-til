# 🧾TIL
## 날짜: 2025-02-19 🐾

## 📁 (회고) 프로젝트 설계에 대한 고민들

오늘은 바닐라 자바스크립트로 커뮤니티를 만드는 과제의 프로젝트 셋팅과 퍼블리싱을 주로 했다.

나는 프론트엔드 개발자이지만 바닐라 자바스크립트로 프로젝트를 해본 경험이 많이 없다. 특히나 서비스 어플리케이션의 경우는 더더욱 그렇다.

그렇기 때문에 폴더 구조부터 차근차근 고민해야만 했다.

### 첫 번째 고민 : html 파일을 페이지 마다 두어야할까? (SPA, MPA)

**`SPA`**는 페이지 접속과 동시에 서버로부터 정적 리소스 전체를 받아온다. html 페이지가 하나로 이루어져 있다.

 **`MPA`**는 각 페이지마다 리소스를 매번 서버에 요청한다. 페이지 마다 html 파일이 존재한다.

결론은 이번 프로젝트에서는 SPA 방식으로 필요한 데이터만 서버로부터 얻어올 수 있도록 구성했다. 

MPA의 경우 페이지 이동 시 전체 HTML 파일을 서버로부터 받아야 한다. 따라서 매번 서버로부터 HTML 페이지를 얻어야 하기 때문에 서버에 부하가 발생하며, 페이지 전환 시 깜빡임이 발생하고, 라우팅이 비교적 느리기 때문에 사용자 경험 측면에서 좋지 않다. 

따라서 하나의 index.html 파일을 두고, 라우팅을 구현해 페이지를 전환하는 SPA 방식으로 폴더를 구성하기로 결정했다. 

### 두 번째 고민 : 라우팅

React를 사용해 개발할 때는 react-router-dom을 사용해 손쉽게 라우팅했다.

하지만 바닐라 자바스크립트로 SPA를 개발할 때는 라우팅을 어떻게 해야할지 감이 오지 않아 찾아본 결과 크게 두 가지의 방법이 있었다.

1. 해쉬 사용
2. history API 사용

해쉬를 사용할 경우 SEO 측면에서 좋지 않은데 검색 엔진이 # 이후를 무시한다고 한다. 웹 어플리케이션을 개발하는데 치명적이라고 생각되어서 history API를 사용하기로 결정하였다.

history API의 경우 실제로 내가 사용하고 있었던 라우팅 라이브러리의 기반이 되는 웹 표준 api다.
자바스크립트에서 history API는 기본적으로 `history` 전역 객체를 통해서 사용하며, 
히스토리에 기록된 페이지 방문 이력을 따라 이동하는 것을 자바스크립트에서 제어할 수 있도록 한다. 

개발하며 주로 사용할 것은 이러한 페이지 방문 이력을 생성하는 `history.pushState` 다.  새 데이터 전달을 위한 상태, 제목, url을 지정할 수 있다. 

또, `history.popState` 를 통해 뒤로가기나 앞으로 가는 이벤트가 감지될 경우 수행할 동작을 선언하여 라우팅 해주고자 한다.

### 세 번째 고민 : 공통된 UI

피그마 파일을 보며 공통된 UI를 확인해본 결과 다음과 같이 있었다.

1. 헤더 (공통 레이아웃) 
2. 버튼
3. 게시물 항목
4. 댓글 항목

공통된 UI는 src/components 폴더에 나누어 재사용하려고 한다. 

필요할 때마다 동적으로 생성해줄 예정이다.

### 네 번째 고민 : innerHTML과 DOM 조작

직접 createElement()를 하고 appendChild()해서 html을 작성해주는 게 좋을지, 아니면 그냥 innerHTML을 한 번에 작성해서 넣어주는 게 좋을지 잘 모르겠다.

보안 상 innerHTML을 지양하라는 글을 봤었어서 login.js에서는 사용하지 않았더니 코드가 너무 길어지고 복잡해져서 이렇게 하는 게 맞는 건가..? 싶다. 

일단 나머지 js파일들은 innerHTML로 바로 입력하는 방식으로 구현했고 추후 수정될 수 있을 것 같다.

### 다섯 번째 고민 : 스타일 관리

스타일을 style.css에 통째로 관리하고 있는데, 유지보수가 쉽도록 파일을 나누고 싶어졌다. 각 컴포넌트나 페이지 내에서 사용되는 스타일을 해당 폴더 안에 스타일 파일을 두어 각각 import하는 방법을 생각해서 그렇게 해보았는데, 바닐라 자바스크립트에서는 css파일을 자동으로 import 할 수가 없었다.

전에 react 환경에서 scss를 사용해 개발했던 경우는 그렇게 되었던 걸로 기억해서, 궁금해서 찾아본 결과 wepback과 vite가 자동으로 scss를 컴파일해서 JS 내에서 CSS를 처리할 수 있도록 변환한 것이었다. 바닐라 자바스크립트에서는 다른 방법을 찾아야 한다..

이 부분은 아직 생각해내지 못해서 추후 수정해 리팩토링할 계획이다.

### 추후에 해결할 고민 : 상태 관리

아직은 퍼블리싱 단계의 과제지만 추후 api 연결까지를 고려해볼 때 

마찬가지로 React + 전역 상태 관리 라이브러리로 상태 관리가 수월했는데 

React는 자바스크립트 기반의 라이브러리지만 아이러니 하게도 바닐라 자바스크립트로 하려니 막막했다. ~~미리미리 기초부터 공부해둘걸..~~

마찬가지로 따로 공부하는 시간을 가졌고, 더 알아보고 싶어서 관련 내용은 아직 업데이트 하지 않았다.  4주차 과제에 구현해서 제출하려고 한다.

### 참고 자료 및 링크
